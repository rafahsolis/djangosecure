# djangosecure
Secure Django settings

This module creates a cryptokey outside the django project directory, encrypts with that cryptokey your django sensible
settings and stores the encrypted values.

You can use it at your project settings.py file
* Note: Before running the django site with gunicorn or similar for the first time, you must run somme manage command to be prompt for the sensible settings

# Examples
## SECRET_KEY

```
import os
import djangosecure

SECRET_KEY = djangosecure.get_secret_key(os.path.join(BASE_DIR, 'secure_settings', 'secret_key.secure'))
```

get_secret_key(secret_key_file, cryptokey='Default cryptokey generated')


## DATABASES
The first time you run python manage.py runserver you will be prompted for your database settings. They will be saved
encrypted with the generated cryptokey generated by django-secure module.

You can have as many database configurations, change the parameter to change the configuration and running
 ```python manage.py runserver``` you will be prompted again for the new settings

```
import djangosecure

...

DATABASES = {
    'default': djangosecure.get_database('production'),
}

...
```

## S3 IAM Settings
In your settings.py include:

```
from djangosecure import get_s3_config

# S3 Config
AWS_STORAGE_BUCKET_NAME = 'bucket_name'
AWS_ACCESS_KEY_ID = get_s3_config(AWS_STORAGE_BUCKET_NAME, 'S3_access_IAM_Key_Id', S3_CFG)
AWS_SECRET_ACCESS_KEY = get_s3_config(AWS_STORAGE_BUCKET_NAME, 'S3_access_IAM_Secret_Key', S3_CFG)
AWS_S3_CUSTOM_DOMAIN = '%s.s3.amazonaws.com' % AWS_STORAGE_BUCKET_NAME
```

## Hidden setting
To encrypt any other setting use hidde_setting, for example

```
from djangosecure import hidden_setting
CELERY_BROKER = 'amqp://{0}:{1}@localhost//'.format(
    hidden_setting('celery', 'broker_username'),
    hidden_setting('celery', 'broker_password')
    )

```